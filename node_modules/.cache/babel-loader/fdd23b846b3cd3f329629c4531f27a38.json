{"ast":null,"code":"import _objectSpread from \"/home/pranuthideepak/Desktop/SOAL/MS/ms10-lupus/e-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/pranuthideepak/Desktop/SOAL/MS/ms10-lupus/e-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/pranuthideepak/Desktop/SOAL/MS/ms10-lupus/e-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/pranuthideepak/Desktop/SOAL/MS/ms10-lupus/e-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/pranuthideepak/Desktop/SOAL/MS/ms10-lupus/e-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/pranuthideepak/Desktop/SOAL/MS/ms10-lupus/e-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/pranuthideepak/Desktop/SOAL/MS/ms10-lupus/e-commerce/e-commerce/src/components/Brand.js\";\nimport React, { Component } from 'react';\nimport Product from './Product';\nimport { connect } from \"react-redux\";\nimport { Link, withRouter } from 'react-router-dom';\nimport { compose } from 'redux';\nimport Categories from './Categories';\nimport Pagination from '../pagination/Pagination';\nimport '../style/ProductList.css';\nimport PropTypes from 'prop-types';\nvar count = 0;\n\nvar Brand =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Brand, _Component);\n\n  function Brand() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Brand);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Brand)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      allProducts: [],\n      currentProducts: [],\n      currentPage: null,\n      totalPages: null,\n      refresh: true\n    };\n\n    _this.componentWillReceiveProps = function (nextProps) {\n      _this.setState({\n        allProducts: nextProps.products\n      });\n    };\n\n    _this.componentDidMount = function () {\n      console.log(\"brand mounted\");\n      count = 0;\n\n      _this.setState(_objectSpread({}, _this.state, {\n        refresh: true\n      }));\n    };\n\n    _this.componentDidUpdate = function () {\n      if (count == 0 && _this.props.products.length > 0) {\n        _this.setState({\n          allProducts: _this.props.products\n        });\n\n        count++;\n      }\n    };\n\n    _this.onPageChanged = function (data) {\n      var allProducts = _this.state.allProducts;\n      var currentPage = data.currentPage,\n          totalPages = data.totalPages,\n          pageLimit = data.pageLimit;\n      var offset = (currentPage - 1) * pageLimit;\n      var currentProducts = allProducts.slice(offset, offset + pageLimit);\n\n      _this.setState({\n        currentPage: currentPage,\n        currentProducts: currentProducts,\n        totalPages: totalPages\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Brand, [{\n    key: \"getProducts\",\n    value: function getProducts(products) {\n      if (count != 0) {\n        return products.length ? products.map(function (product) {\n          return React.createElement(\"div\", {\n            class: \"col-sm-6 col-md-4\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 53\n            },\n            __self: this\n          }, React.createElement(Product, {\n            id: product.id,\n            img: '../' + product.img,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 54\n            },\n            __self: this\n          }));\n        }) : React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, \"There is no product\");\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          allProducts = _this$state.allProducts,\n          currentProducts = _this$state.currentProducts,\n          currentPage = _this$state.currentPage,\n          totalPages = _this$state.totalPages;\n      var totalProducts = allProducts.length;\n      var ProductsList = this.getProducts(this.state.currentProducts);\n      if (totalProducts === 0) return null;\n      console.log(\"total pages\", totalPages, this.props.match.params.brand, totalProducts);\n      return React.createElement(\"div\", {\n        key: this.props.match.params.brand,\n        id: \"content\",\n        class: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"padding-top\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm-4 col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(Categories, {\n        category: this.props.match.params.brand,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-sm-8 col-md-9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, ProductsList, React.createElement(\"div\", {\n        className: \"col-md-12 align-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(Pagination, {\n        totalRecords: totalProducts,\n        pageLimit: 6,\n        pageNeighbours: 1,\n        onPageChanged: this.onPageChanged,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      })))))));\n    }\n  }]);\n\n  return Brand;\n}(Component);\n\nBrand.propTypes = {\n  products: PropTypes.array\n};\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  var brand = ownProps.match.params.brand;\n  var filteredProducts = state.products.products.filter(function (product) {\n    return product.company.toLowerCase() == brand.toLowerCase();\n  });\n  return {\n    products: filteredProducts\n  };\n};\n\nexport default compose(withRouter, connect(mapStateToProps))(Brand); //export default withRouter(connect(mapStateToProps)(ProductList));","map":{"version":3,"sources":["/home/pranuthideepak/Desktop/SOAL/MS/ms10-lupus/e-commerce/e-commerce/src/components/Brand.js"],"names":["React","Component","Product","connect","Link","withRouter","compose","Categories","Pagination","PropTypes","count","Brand","state","allProducts","currentProducts","currentPage","totalPages","refresh","componentWillReceiveProps","nextProps","setState","products","componentDidMount","console","log","componentDidUpdate","props","length","onPageChanged","data","pageLimit","offset","slice","map","product","id","img","totalProducts","ProductsList","getProducts","match","params","brand","propTypes","array","mapStateToProps","ownProps","filteredProducts","filter","company","toLowerCase"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Product from './Product'\nimport { connect } from \"react-redux\";\nimport {Link,withRouter} from 'react-router-dom';\nimport {compose} from 'redux';\nimport Categories from './Categories'\nimport Pagination from '../pagination/Pagination'\nimport '../style/ProductList.css'\nimport PropTypes from 'prop-types';\n\nlet count = 0;\n\n class Brand extends Component {\n  \n  state={\n    allProducts:[],\n    currentProducts: [], \n    currentPage: null, \n    totalPages: null,\n    refresh: true\n  }\n  componentWillReceiveProps=(nextProps)=>{\n    \n    this.setState({\n        allProducts: nextProps.products\n    })\n   }\ncomponentDidMount=()=>{\n    console.log(\"brand mounted\")\n  count=0;\n  this.setState({...this.state,refresh:true});\n}\n \n  \n    componentDidUpdate=()=>{\n        \n      if(((count == 0) && (this.props.products.length >0))){\n        this.setState({\n          allProducts: this.props.products\n        })\n       \n      count++;\n      }\n   \n    }\n \n\n  getProducts(products){\n    if(count!=0){\n    return (products.length? (\n      products.map(product => {\n              return(\n                   <div class=\"col-sm-6 col-md-4\">\n                     <Product id = {product.id} img ={'../'+product.img}/>\n                   </div>\n              )\n      })\n      \n    ):(<div></div>))\n    }else { return (<h3>There is no product</h3>)}\n  }\n\n  onPageChanged = data => {\n    const { allProducts } = this.state;\n    const { currentPage, totalPages, pageLimit } = data;\n\n    const offset = (currentPage - 1) * pageLimit;\n    const currentProducts = allProducts.slice(offset, offset + pageLimit);\n\n    this.setState({ currentPage, currentProducts, totalPages });\n  }\n\n  render() {\n    const { allProducts, currentProducts, currentPage, totalPages } = this.state;\n    \n    const totalProducts = allProducts.length;\n    \n    const  ProductsList= this.getProducts(this.state.currentProducts);\n    \n    if (totalProducts === 0) return null;\n    console.log(\"total pages\",totalPages,this.props.match.params.brand,totalProducts)\n    return (\n\n            <div   key = {this.props.match.params.brand} id=\"content\" class=\"container\">\n              <div className=\"padding-top\">\n              <div className=\"row\">\n                <div className=\"col-sm-4 col-md-3\">\n                    <Categories category={this.props.match.params.brand}/>\n                </div>\n                <div className=\"col-sm-8 col-md-9\">\n                  <div className=\"row\">\n                    {ProductsList}\n                    <div className=\"col-md-12 align-right\">\n                    <Pagination  totalRecords={totalProducts} pageLimit={6} pageNeighbours={1} onPageChanged={this.onPageChanged} />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>          \n    )\n  }\n}\n\nBrand.propTypes = {\n  products: PropTypes.array\n};\n\nconst mapStateToProps = (state,ownProps) =>{\n    let brand = ownProps.match.params.brand;\n    const filteredProducts = state.products.products.filter(product => product.company.toLowerCase() == brand.toLowerCase());\n\n  return ({\n  products: filteredProducts\n});\n}\nexport default compose(\n  withRouter,\n  connect(mapStateToProps)\n)(Brand);\n//export default withRouter(connect(mapStateToProps)(ProductList));"]},"metadata":{},"sourceType":"module"}